{% load static %}

<header class="header">
    <nav class="nav-header">

        <div class="container-logo-categories">
            <a href="{% url 'home' %}" class="logo1">
                <img src="{% static 'icons/logo1.svg' %}" alt="logo 1">
                Luxe
            </a>
        </div>

        <div class="container-search-categories">

            <div class="dropdown-categories">
                <button class="dropbtn" id="dropbtncate" onclick="myFunction()">
                    CATEGORIES
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 25"
                        id="svgarrowcate">
                        <path d="M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"></path>
                    </svg>
                </button>
                <div class="dropdown-content-categories" id="dropCategories">
                    <div class="row-categories">
                        <ul>
                            {% for category, subcategories in subcategories.items %}
                            <li>
                                <details>
                                    <summary>{{category.title}}</summary>
                                    {% for subcategory in subcategories %}
                                    <a href="{{subcategory.get_products_of_the_subcategory}}">{{subcategory.title}}</a>
                                    {% endfor %}
                                </details>

                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>

            <script src="{% static 'js/dropdown_categories.js' %}"></script>


            <form action="" class="container-searchbar" role="search">
                {% csrf_token %}

                <input type="search" name="" id="" placeholder="Seach in...">
                <button type="submit" class="btn-search">
                    <img src="{% static 'icons/search-icon.svg' %}" alt="search-icon">
                </button>
            </form>
        </div>

        <div class="container-cart-authentication">
            <a href="#" class="header-link-cart" title="Ir al carrito">
                <svg class="w-6 h-6" aria-hidden=" true" xmlns="http://www.w3.org/2000/svg" width="34.02" height="34.02"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M9 10V6a3 3 0 0 1 3-3v0a3 3 0 0 1 3 3v4m3-2 .917 11.923A1 1 0 0 1 17.92 21H6.08a1 1 0 0 1-.997-1.077L6 8h12Z" />
                </svg>

            </a>

            {% if user.is_authenticated %}
            <div class="container-dropdown-profile">
                <div class="dropdown dropdownProfile" onclick="toggleDropdownMovil()">
                    <button class="dropbtn-user">{{user.acronym_name}}</button>
                    <div class="dropdown-content" id="myDropdown">
                        <div class="container-info-user-menu">
                            <div class="container-info-user-names">
                                <p title="{{user.first_name}} {{user.last_name}}">{{user.first_name}} {{user.last_name}}
                                </p>
                                <p title="{{user.email}}">{{user.email}}</p>
                            </div>
                        </div>
                        <a href="#">Settings</a>
                        <a href="{% url 'logout' %}">Logout</a>
                    </div>
                    <script src="{% static 'js/menu_movil.js' %}"></script>
                </div>
            </div>
            {% else %}
            <a href="{% url 'signup' %}" class="header-link-account" title="Registrarse / Iniciar sesion">
                <svg class="w-6 h-6 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="34.02" height="34.02"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                </svg>

            </a>
            {% endif %}

        </div>
    </nav>
</header>